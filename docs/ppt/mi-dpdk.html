<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
  </head>
  <body>
    <textarea id="source">

## DPDK(Data Plane Development Dit)简介

### What it is
DPDK is a set of libraries and drivers for fast packet processing. It was designed to run on any processors. The first supported CPU was Intel x86 and it is now extended to IBM Power 8, EZchip TILE-Gx and ARM. It runs mostly in Linux userland. A FreeBSD port is available for a subset of DPDK features.

### Main libraries
- multicore framework
- huge page memory
- ring buffers
- poll-mode drivers
---

### Usage
These libraries can be used to:
- receive and send packets within the minimum number of CPU cycles (usually less than 80 cycles)
- develop fast packet capture algorithms (tcpdump-like)
- run third-party fast path stacks

### What it is not
DPDK is not a networking stack and does not provide functions such as Layer-3 forwarding, IPsec, firewalling, etc. Within the tree, however, various application examples are included to help developing such features.
---

## dpdk在小米
- 2015-03-15 ~ 2015-12-23 mi_iptraffic `丁冠军`
- 2015-06-03 ~ 2015-09-24 porpoise/listener `喻波`
- 2016-04-12 ~ 2016-10-17 dpvs `喻波,黄骜哲`
---

## dpvs(Data Plane Virtual Server)简介
基于[dpdk][dpdk_org]开发的类[lvs][lvs]负载均衡软件,并集成ospf协议

对tcp/fullnat的转发，vs_in()成功转发一个报文的平均cpu开销在4500cycle左右，
使用intel i7-4790的pc，单核理论最大值在0.85mpps左右
---

![][dpvs_img]
---

## FEATURE
* synproxy
* fullnat(tcp/udp)
* persistent
* non-blocking concurrent
* memory pool
* vsadmin/keepalived support
* dpdk
  - multicore framework
  - huge page memory
  - ring buffers
  - poll-mode drivers
---

## TODO
* drop entry/drop packet
* checksum in hardware
* IPv6 support
* mtu check/ip fragmentation
---

## DPDK
* [dpdk.org][dpdk_org] 官网
* [guide][grog_guide]
* [samples][samples]
* source
  - [git://dpdk.org/dpdk](http://dpdk.org/browse/dpdk)
  - [git://dpdk.org/apps/pktgen-dpdk](http://dpdk.org/browse/apps/pktgen-dpdk/)

[lvs]:http://www.linuxvirtualserver.org/
[dpdk_org]:http://dpdk.org
[grog_guide]:http://dpdk.org/doc/guides/prog_guide
[samples]:http://dpdk.org/doc/guides/sample_app_ug/index.html
[dpvs_img]:https://cdn.rawgit.com/yubo/doc/master/docs/img/dpvs.svg

    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
